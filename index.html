<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>UN D√çA DE DEIVID</title>

  <!-- Luxury font -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- PWA / Theme -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#EEE9DF" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="topbar">
    <h1>UN D√çA DE DEIVID</h1>
    <button id="btnInstall" class="btn" hidden>Instalar</button>
  </header>

  <main class="wrap">
    <!-- Estado -->
    <section class="card">
      <div class="row">
        <div class="idwrap">
          <div id="avatarCircle" class="avatar"><span>DV</span></div>
          <div>
            <div class="muted tiny">Hoy</div>
            <div id="todayLabel" class="big"></div>
          </div>
        </div>
        <div class="kpi">
          <div><div class="tiny muted">Nivel</div><div id="nivel" class="big">1</div></div>
          <div><div class="tiny muted">Vidas</div><div id="vidas" class="big">3</div></div>
          <div><div class="tiny muted">XP hoy</div><div id="xpHoy" class="big">0</div></div>
          <div><div class="tiny muted">XP semana</div><div id="xpSemana" class="big">0</div></div>
        </div>
      </div>
      <div class="progress"><div id="barSemana" class="bar"></div></div>
      <div id="metaText" class="tiny muted">0 / 500</div>
      <div id="recompensaHint" class="hint tiny">Suma XP para desbloquear recompensas.</div>

      <!-- üéØ Misi√≥n del d√≠a (no rompe si JS no lo usa) -->
      <div class="quest">
        <div class="quest-title">üéØ Misi√≥n del d√≠a</div>
        <div id="questText" class="quest-text tiny"></div>
        <div id="questStatus" class="quest-status tiny muted"></div>
      </div>

      <div class="row gap">
        <button id="btnResumen" class="btn">Resumen</button>
        <button id="btnResetDia" class="btn">Reiniciar d√≠a</button>
        <button id="btnConfig" class="btn">Configurar</button>
      </div>
    </section>

    <!-- üìä Stats del personaje -->
    <section class="card">
      <h2>Stats del personaje</h2>
      <div class="stats">
        <div class="stat">
          <div class="stat-label">üí™ Energ√≠a</div>
          <div class="stat-bar"><div id="statEnergia" class="stat-fill"></div></div>
        </div>
        <div class="stat">
          <div class="stat-label">üß† Conocimiento</div>
          <div class="stat-bar"><div id="statConocimiento" class="stat-fill"></div></div>
        </div>
        <div class="stat">
          <div class="stat-label">üí∞ Sabidur√≠a</div>
          <div class="stat-bar"><div id="statSabiduria" class="stat-fill"></div></div>
        </div>
        <div class="stat">
          <div class="stat-label">üçé Vitalidad</div>
          <div class="stat-bar"><div id="statVitalidad" class="stat-fill"></div></div>
        </div>
      </div>
      <p id="statsHint" class="tiny muted">Los h√°bitos de hoy alimentan tus atributos.</p>
    </section>

    <!-- H√°bitos -->
    <section class="card">
      <div class="row">
        <h2>H√°bitos de hoy</h2>
        <span class="tiny muted">Marca ‚úì o FALLO. Se guarda solo.</span>
      </div>
      <div id="habitosList" class="list"></div>
    </section>

    <!-- Recompensas -->
    <section class="card">
      <h2>Recompensas</h2>
      <ul id="rewardsList" class="bullets"></ul>
      <p class="tiny muted">Domingo 23:59: si &lt;300 XP pierdes 1 vida; si ‚â•500 XP ganas 1 (m√°x 5).</p>
    </section>
  </main>

  <!-- Panel Config -->
  <section id="panelConfig" class="sheet" hidden>
    <div class="sheet-inner">
      <h3>Configuraci√≥n</h3>
      <label>Meta semanal (XP) <input id="metaSemanal" type="number" min="100" step="10"></label>
      <label>Desbloqueo comida (XP) <input id="umbralComida" type="number" min="100" step="10"></label>
      <label>Desbloqueo cervezas (XP) <input id="umbralCerveza" type="number" min="100" step="10"></label>
      <label>Vidas actuales (0‚Äì5) <input id="vidasInput" type="number" min="0" max="5"></label>
      <h4>H√°bitos</h4>
      <table id="tblHabitos" class="table"></table>
      <div class="row">
        <input id="newHabName" type="text" placeholder="Nuevo h√°bito">
        <input id="newHabXP" type="number" placeholder="XP">
        <input id="newHabPenalty" type="number" placeholder="Penal">
        <button id="addHab" class="btn">Agregar</button>
      </div>
      <div class="row end"><button id="closeConfig" class="btn">Cerrar</button></div>
    </div>
  </section>

  <!-- Panel Resumen -->
  <section id="panelResumen" class="sheet" hidden>
    <div class="sheet-inner">
      <h3>Resumen semanal</h3>
      <div id="resumenContent" class="tiny"></div>
      <div class="row end"><button id="closeResumen" class="btn">Cerrar</button></div>
    </div>
  </section>

  <!-- Intro / Bienvenida -->
  <section id="introSheet" class="sheet" hidden>
    <div class="sheet-inner">
      <h3>Bienvenido</h3>
      <p class="tiny">
        <b>UN D√çA DE DEIVID</b> es tu juego de h√°bitos. Marca tus logros diarios, suma XP y desbloquea recompensas semanales.
        Tu objetivo: constancia, disciplina y mejora continua.
      </p>

      <div class="intro-grid">
        <div><div id="introAvatarPreview" class="avatar bigavatar"><span>DV</span></div></div>
        <div>
          <label class="tiny">Tu avatar (opcional):</label>
          <input id="avatarInput" type="file" accept="image/*">
          <p class="tiny muted">Se guarda solo en este dispositivo.</p>
          <label class="tiny row" style="gap:8px;margin-top:8px">
            <input id="rememberMe" type="checkbox" checked> No volver a mostrar
          </label>
        </div>
      </div>

      <div class="row end" style="margin-top:12px">
        <button id="btnStart" class="btn">Empezar</button>
      </div>
    </div>
  </section>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js'); }
  </script>
</body>
</html>

